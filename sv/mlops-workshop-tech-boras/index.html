<!doctype html><html lang=sv><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>MLOps Workshop: Bygga ML-pipelines för produktion med MLflow och Airflow - Pine Grove Interactive</title><meta name=Description content="Från 'kasta modellen över staketet' till automatiserade ML-pipelines. En praktisk guide till MLOps med MLflow och Airflow, baserad på den tredje workshopen i AI Lab-serien på Tech Borås."><meta property="og:url" content="https://pgi.dev/sv/mlops-workshop-tech-boras/">
<meta property="og:site_name" content="Pine Grove Interactive"><meta property="og:title" content="Från Jupyter Notebooks till Produktion: MLOps Workshop på Tech Borås"><meta property="og:description" content="Från 'kasta modellen över staketet' till automatiserade ML-pipelines. En praktisk guide till MLOps med MLflow och Airflow, baserad på den tredje workshopen i AI Lab-serien på Tech Borås."><meta property="og:locale" content="sv"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-23T16:30:00+02:00"><meta property="article:modified_time" content="2025-11-30T09:55:37+01:00"><meta property="og:image" content="https://pgi.dev/images/tree.svg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pgi.dev/images/tree.svg"><meta name=twitter:title content="Från Jupyter Notebooks till Produktion: MLOps Workshop på Tech Borås"><meta name=twitter:description content="Från 'kasta modellen över staketet' till automatiserade ML-pipelines. En praktisk guide till MLOps med MLflow och Airflow, baserad på den tredje workshopen i AI Lab-serien på Tech Borås."><meta name=application-name content="Pine Grove Interactive"><meta name=apple-mobile-web-app-title content="Pine Grove Interactive"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/images/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://pgi.dev/sv/mlops-workshop-tech-boras/><link rel=prev href=https://pgi.dev/sv/setfit-nlp-workshop-tech-boras/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Från Jupyter Notebooks till Produktion: MLOps Workshop på Tech Borås","inLanguage":"sv","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/pgi.dev\/sv\/mlops-workshop-tech-boras\/"},"image":["https:\/\/pgi.dev\/images\/apple-touch-icon.png"],"genre":"posts","wordcount":1441,"url":"https:\/\/pgi.dev\/sv\/mlops-workshop-tech-boras\/","datePublished":"2025-09-23T16:30:00+02:00","dateModified":"2025-11-30T09:55:37+01:00","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/pgi.dev\/images\/tree.svg"},"author":{"@type":"Person","name":"Kristoffer Johansson"},"description":"Från 'kasta modellen över staketet' till automatiserade ML-pipelines. En praktisk guide till MLOps med MLflow och Airflow, baserad på den tredje workshopen i AI Lab-serien på Tech Borås."}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><script defer src=https://cloud.umami.is/script.js data-website-id=6621ff6c-2172-46d3-96e6-c04c97e6890f></script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/sv/ title="Pine Grove Interactive"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/logo-pgi-dev.svg data-srcset="/images/logo-pgi-dev.svg, /images/logo-pgi-dev.svg 1.5x, /images/logo-pgi-dev.svg 2x" data-sizes=auto alt=Home title=Home></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/sv/posts/>Blogg </a><a class=menu-item href=/sv/offer/>Vårt Erbjudande </a><a class=menu-item href=/sv/about/>Om oss </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title="Välj Språk">Svenska<i class="fas fa-chevron-right fa-fw" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/sv/mlops-workshop-tech-boras/ selected>Svenska</option><option value=/mlops-workshop-tech-boras/>English</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder="Sök titlar eller innehåll..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Sök><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Rensa><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Byt Tema"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/sv/ title="Pine Grove Interactive"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/logo-pgi-dev.svg data-srcset="/images/logo-pgi-dev.svg, /images/logo-pgi-dev.svg 1.5x, /images/logo-pgi-dev.svg 2x" data-sizes=auto alt=/images/logo-pgi-dev.svg title=/images/logo-pgi-dev.svg></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Sök titlar eller innehåll..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Sök><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Rensa><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Avbryt</a></div><a class=menu-item href=/sv/posts/ title>Blogg</a><a class=menu-item href=/sv/offer/ title>Vårt Erbjudande</a><a class=menu-item href=/sv/about/ title>Om oss</a><a href=javascript:void(0); class="menu-item theme-switch" title="Byt Tema">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Välj Språk">Svenska<i class="fas fa-chevron-right fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/sv/mlops-workshop-tech-boras/ selected>Svenska</option><option value=/mlops-workshop-tech-boras/>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Innehåll</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class=single-title>Från Jupyter Notebooks till Produktion: MLOps Workshop på Tech Borås</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://www.linkedin.com/in/kristoffer-johansson/ title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Kristoffer Johansson</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-09-23>2025-09-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1441 ord&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;7 minuter&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Innehåll</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#problemet-med-utvecklingsmiljön>Problemet med utvecklingsmiljön</a><ul><li><a href=#det-typiska-data-science-arbetsflödet>Det typiska data science arbetsflödet</a></li></ul></li><li><a href=#kasta-över-staketet-anti-mönstret>&ldquo;Kasta över staketet&rdquo; anti-mönstret</a></li><li><a href=#mlops-lösningen-produktionsarkitektur>MLOps-lösningen: produktionsarkitektur</a></li><li><a href=#bygga-pipelinen-mlflow--airflow>Bygga pipelinen: MLflow + Airflow</a><ul><li><a href=#tech-stacken>Tech-stacken</a></li><li><a href=#dag-strukturen>DAG-strukturen</a></li><li><a href=#installation-och-uppsättning>Installation och uppsättning</a></li><li><a href=#träning-och-registrering-av-en-modell>Träning och registrering av en modell</a></li><li><a href=#modellövervakning>Modellövervakning</a></li></ul></li><li><a href=#mlops--ai-konsult-i-borås>MLOps & AI-konsult i Borås</a></li></ul></nav></div></div><div class=content id=content><p>Den 23 september genomförde jag den tredje och avslutande workshopen i AI Lab-serien på Högskolan i Borås. Den här gången tacklade vi gapet mellan experimentering och produktion. Problemet med att &ldquo;kasta det över staketet&rdquo; som dödar många ML-projekt.</p><figure><a class=lightgallery href=/mlops-workshop-tech-boras/tech-boras-workshop-3.webp title=/mlops-workshop-tech-boras/tech-boras-workshop-3.webp data-thumbnail=/mlops-workshop-tech-boras/tech-boras-workshop-3.webp data-sub-html="<h2>MLOps workshop på Högskolan i Borås, 23 september</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/mlops-workshop-tech-boras/tech-boras-workshop-3.webp data-srcset="/mlops-workshop-tech-boras/tech-boras-workshop-3.webp, /mlops-workshop-tech-boras/tech-boras-workshop-3.webp 1.5x, /mlops-workshop-tech-boras/tech-boras-workshop-3.webp 2x" data-sizes=auto alt=/mlops-workshop-tech-boras/tech-boras-workshop-3.webp width=1280 height=720></a><figcaption class=image-caption>MLOps workshop på Högskolan i Borås, 23 september</figcaption></figure><h2 id=problemet-med-utvecklingsmiljön>Problemet med utvecklingsmiljön</h2><p>De flesta ML-projekt börjar i Jupyter notebooks. Du laddar in data, utforskar den, tränar en modell, validerar den och kallar det klart. Det fungerar för experiment, men skapar ett problem: hela arbetsflödet lever på din laptop i en linjär, manuell process.</p><h3 id=det-typiska-data-science-arbetsflödet>Det typiska data science arbetsflödet</h3><ol><li><strong>Dataanalys</strong> - Utforska och förstå ditt dataset</li><li><strong>Förbehandling</strong> - Rensa och transformera data</li><li><strong>Modellträning</strong> - Anpassa din modell till datan</li><li><strong>Modellvalidering</strong> - Kontrollera om den faktiskt fungerar</li><li><strong>Modellöverlämning</strong> - Hoppas att någon kan distribuera den</li></ol><p>Varje steg körs manuellt. Ingen automation. Ingen versionering. Inget sätt att reproducera resultat tillförlitligt. När din modell presterar bra i validering så står du inför en fråga: hur får du in detta i produktion?</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Överlämningsproblemet skalas olika, men finns överallt<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>På ett <strong>litet företag</strong> hanterar en person allt från dataanalys till distribution. Överlämningen sker mellan olika roller som samma person har.</p><p>På <strong>mellan- och stora företag</strong> bygger data scientists modeller men har svårt att lämna över dem till ingenjörsteam. Modellen som fungerade perfekt i en notebook misslyckas i produktion, eller ännu värre, blir oanvända eftersom det är för svårt med deployment.</p></div></div></div><p><strong>MLOps-metoder byggda på CI/CD-principer</strong> löser detta genom att eliminera överlämningen helt och hållet. Istället för att skicka artefakter mellan team eller roller bygger du automatiserade pipelines som flyttar kod från experiment till produktion. Samma pipeline som tränar din modell distribuerar den också.</p><h2 id=kasta-över-staketet-anti-mönstret>&ldquo;Kasta över staketet&rdquo; anti-mönstret</h2><p>När organisationer försöker skala sitt ML-arbete stöter de på en vägg. Bokstavligt talat.</p><figure><a class=lightgallery href=/mlops-workshop-tech-boras/throw-over-fence-diagram.webp title=/mlops-workshop-tech-boras/throw-over-fence-diagram.webp data-thumbnail=/mlops-workshop-tech-boras/throw-over-fence-diagram.webp data-sub-html="<h2>Arbetsflödet &lsquo;kasta det över staketet&rsquo;: data scientists och ingenjörer arbetar isolerat. Bildkälla swirlai.com</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/mlops-workshop-tech-boras/throw-over-fence-diagram.webp data-srcset="/mlops-workshop-tech-boras/throw-over-fence-diagram.webp, /mlops-workshop-tech-boras/throw-over-fence-diagram.webp 1.5x, /mlops-workshop-tech-boras/throw-over-fence-diagram.webp 2x" data-sizes=auto alt=/mlops-workshop-tech-boras/throw-over-fence-diagram.webp width=1600 height=1439></a><figcaption class=image-caption>Arbetsflödet &lsquo;kasta det över staketet&rsquo;: data scientists och ingenjörer arbetar isolerat. Bildkälla <a href=https://www.newsletter.swirlai.com/p/evolving-maturity-of-mlops-stack target=_blank rel="noopener noreffer">swirlai.com</a></figcaption></figure><p>Titta på diagrammet ovan. Till vänster arbetar data scientist i Jupyter, kopplad till datalagret. De analyserar data, förbehandlar den, tränar en modell, validerar den. I slutet av denna pipeline sitter <strong>Modellöverlämning</strong> (steg 1).</p><p>Sen kommer väggen. Tegelväggen i mitten representerar organisatorisk separation. Modellartefakten dumpas i en bucket (steg 2) och skickas över till andra sidan. Ingen träningskontext. Ingen förbehandlingskod. Inga valideringsmått. Bara en picklad modellfil och en massa hopp.</p><p>På andra sidan tar mjukvaruingenjören emot denna artefakt (steg 3). De försöker distribuera (steg 4), packar in den i en container och exponerar den till produktapplikationer (steg 5). Sen slår verkligheten till.</p><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden=true></i>Varför detta mönster misslyckas<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>Modellen som uppnådde 95% noggrannhet i notebooken får 60% i produktion. Varför?</p><ul><li><strong>Olika datafördelningar</strong>: Träning använde förra månadens data, produktion ser dagens data</li><li><strong>Saknad förbehandling</strong>: Notebooken hade 10 celler med datarensning som aldrig dokumenterades</li><li><strong>Beroende-missmatchningar</strong>: Modellen tränad med scikit-learn 1.4, produktion kör 1.0</li><li><strong>Ingen övervakning</strong>: När noggrannheten sjunker märker ingen det på flera veckor eller månader</li></ul></div></div></div><p>Det här arbetsflödet går sönder eftersom det behandlar modellutveckling och distribution som separata problem. Data scientist optimerar för noggrannhet i experiment. Ingenjören optimerar för tillförlitlighet i produktion. Dessa mål konfliktar när det finns en vägg mellan dem.</p><p>Dokumentation fixar inte detta. READMEs blir föråldrade. Kommentarer ignoreras. Vad du behöver är delad infrastruktur som båda rollerna interagerar med under sitt arbete.</p><h2 id=mlops-lösningen-produktionsarkitektur>MLOps-lösningen: produktionsarkitektur</h2><p>Lösningen bryggar över väggen med hjälp av delad infrastruktur. Istället för två isolerade miljöer bygger du automatiserade pipelines som kopplar samman data, träning och distribution.</p><figure><a class=lightgallery href=/mlops-workshop-tech-boras/production-mlops-architecture.webp title=/mlops-workshop-tech-boras/production-mlops-architecture.webp data-thumbnail=/mlops-workshop-tech-boras/production-mlops-architecture.webp data-sub-html="<h2>Produktions-MLOps-arkitektur med automatiserade pipelines och centraliserad metadataspårning. Bildkälla swirlai.com</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/mlops-workshop-tech-boras/production-mlops-architecture.webp data-srcset="/mlops-workshop-tech-boras/production-mlops-architecture.webp, /mlops-workshop-tech-boras/production-mlops-architecture.webp 1.5x, /mlops-workshop-tech-boras/production-mlops-architecture.webp 2x" data-sizes=auto alt=/mlops-workshop-tech-boras/production-mlops-architecture.webp width=1600 height=1439></a><figcaption class=image-caption>Produktions-MLOps-arkitektur med automatiserade pipelines och centraliserad metadataspårning. Bildkälla <a href=https://www.newsletter.swirlai.com/p/evolving-maturity-of-mlops-stack target=_blank rel="noopener noreffer">swirlai.com</a></figcaption></figure><p>Diagrammet visar en produktions-ML-miljö. Tre automatiserade pipelines ersätter manuella överlämningar: <strong>Data Engineering</strong> (lager till kurerad data), <strong>ML Training</strong> (förbehandling genom validering) och <strong>Deployment</strong> (register till produktion).</p><p>I centrum sitter en metadata-hubb med tre komponenter:</p><ul><li><strong>Experiment Tracker</strong>: Loggar mätvärden och parametrar från varje träningskörning</li><li><strong>ML Metadata Store</strong>: Spårar dataursprung och artefaktrelationer</li><li><strong>Model Registry</strong>: Lagrar versionshanterade modeller redo för distribution</li></ul><p>En orkestrator som Airflow kör dessa pipelines enligt scheman eller triggers och skapar en <strong>Continuous Training</strong>-loop där modeller omtränas automatiskt när data förändras.</p><p>Väggen är delvis besegrad. Både data scientists och utvecklare nyttjar samma modellregister och metadata store. Modellen som distribueras är exakt den modell som validerades, med full versionering.</p><h2 id=bygga-pipelinen-mlflow--airflow>Bygga pipelinen: MLflow + Airflow</h2><p>Workshopen på Tech Borås omsatte denna teori till praktik. Deltagarna fick testa på att bygga en komplett MLOps-pipeline med MLflow för spårning och Airflow för orkestrering, allt körande lokalt på sina laptops.</p><figure><a class=lightgallery href=/mlops-workshop-tech-boras/airflow-dag-diagram.webp title=/mlops-workshop-tech-boras/airflow-dag-diagram.webp data-thumbnail=/mlops-workshop-tech-boras/airflow-dag-diagram.webp data-sub-html="<h2>Workshop-DAG:en: automatiserad datagenerering, prediktion, övervakning och städning</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/mlops-workshop-tech-boras/airflow-dag-diagram.webp data-srcset="/mlops-workshop-tech-boras/airflow-dag-diagram.webp, /mlops-workshop-tech-boras/airflow-dag-diagram.webp 1.5x, /mlops-workshop-tech-boras/airflow-dag-diagram.webp 2x" data-sizes=auto alt=/mlops-workshop-tech-boras/airflow-dag-diagram.webp width=1018 height=244></a><figcaption class=image-caption>Workshop-DAG:en: automatiserad datagenerering, prediktion, övervakning och städning</figcaption></figure><h3 id=tech-stacken>Tech-stacken</h3><ul><li><strong>MLflow</strong>: Experimentspårning, metadata store och modellregister</li><li><strong>Airflow</strong>: Pipeline-orkestrering med en Directed Acyclic Graph (DAG)</li><li><strong>uv</strong>: Snabb Python-pakethanterare för beroendehantering</li></ul><h3 id=dag-strukturen>DAG-strukturen</h3><p>Diagrammet visar fem uppgifter som körs i sekvens och parallellt:</p><ol><li><strong>generate_data</strong> (PythonOperator): Simulerar ny data från ett lager</li><li><strong>batch_predict</strong> (PythonOperator): Laddar den registrerade modellen och gör prediktioner</li><li><strong>monitor_model</strong> (PythonOperator): Kontrollerar prediktionskvalitet och loggar mätvärden till MLflow</li><li>Efter övervakning körs två uppgifter parallellt:<ul><li><strong>cleanup_old_artifacts</strong> (BashOperator): Tar bort gamla filer</li><li><strong>generate_summary</strong> (PythonOperator): Skapar prestandarapporter</li></ul></li></ol><p>DAG:en interagerar med MLflows modellregister för att hämta den senaste produktionsmodellen och loggar mätartal med hjälp av experimentspåraren.</p><h3 id=installation-och-uppsättning>Installation och uppsättning</h3><p>Hela exempel koden finns tillgänglig på <a href=https://github.com/krjoha/ai-lab-mlops target=_blank rel="noopener noreffer">github.com/krjoha/ai-lab-mlops</a>
. Till workshopen använde vi <code>uv</code>, en snabb Python-pakethanterare skriven i Rust som hanterar beroendeupplösning och virtuella miljöer. Den är betydligt snabbare än pip och skapar reproducerbara miljöer. Både MLflow och Airflow körs som lokala tjänster:</p><ul><li>MLflow tillhandahåller webbgränssnittet för experimentspårning och modellregister på <code>http://localhost:5000</code></li><li>Medan Airflow kör schemaläggaren och webbgränssnittet för DAG-hantering på <code>http://localhost:8080</code>.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Klona repositoriet</span>
</span></span><span class=line><span class=cl>git clone https://github.com/krjoha/ai-lab-mlops
</span></span><span class=line><span class=cl><span class=nb>cd</span> ai-lab-mlops
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Installera beroenden</span>
</span></span><span class=line><span class=cl>uv sync
</span></span><span class=line><span class=cl><span class=nb>source</span> .venv/bin/activate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Starta MLflow-server (i separat terminal)</span>
</span></span><span class=line><span class=cl>bash start_mlflow.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Starta Airflow-server (i en annan terminal)</span>
</span></span><span class=line><span class=cl>bash start_airflow.sh
</span></span></code></pre></td></tr></table></div></div><p>Efter att ha startat Airflow, hitta användarnamn och lösenord i terminalutskriften eller i <code>airflow/simple_auth_manager_passwords.json.generated</code>.</p><h3 id=träning-och-registrering-av-en-modell>Träning och registrering av en modell</h3><p>Kör träningsskriptet för att skapa en initial modellen:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python tasks/train_model.py
</span></span></code></pre></td></tr></table></div></div><p>Du kan se den lagrade och versionshanterade modellen i MLflow-gränssnittet på <code>http://localhost:5000/#/experiments</code>. Efter att ha skapat en modell och lagrat den i MLflow-registret kan du gå till Airflow-gränssnittet på <code>http://localhost:8080</code> och köra prediktions-DAG/pipelinen därifrån.</p><p>Här bygger vi en sentimentklassificeringsmodell med scikit-learns <code>Pipeline</code> för att kedja ihop en TF-IDF-vektoriserare med logistisk regression. Kärnlogiken för träning finns att beskåda på <a href=https://github.com/krjoha/ai-lab-mlops/blob/main/tasks/train_model.py target=_blank rel="noopener noreffer"><code>tasks/train_model.py</code></a>
, här följer ett urklipp av koden:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Skapa pipeline</span>
</span></span><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>=</span> <span class=n>Pipeline</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s1>&#39;tfidf&#39;</span><span class=p>,</span> <span class=n>TfidfVectorizer</span><span class=p>(</span><span class=n>max_features</span><span class=o>=</span><span class=mi>1500</span><span class=p>,</span> <span class=n>ngram_range</span><span class=o>=</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s1>&#39;classifier&#39;</span><span class=p>,</span> <span class=n>LogisticRegression</span><span class=p>(</span><span class=n>random_state</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>max_iter</span><span class=o>=</span><span class=mi>1000</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Träna och logga med MLflow</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>mlflow</span><span class=o>.</span><span class=n>start_run</span><span class=p>(</span><span class=n>experiment_id</span><span class=o>=</span><span class=n>experiment_id</span><span class=p>)</span> <span class=k>as</span> <span class=n>run</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Logga parametrar och träna</span>
</span></span><span class=line><span class=cl>    <span class=n>mlflow</span><span class=o>.</span><span class=n>log_param</span><span class=p>(</span><span class=s2>&#34;vectorizer_max_features&#34;</span><span class=p>,</span> <span class=mi>1500</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>pipeline</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sentiment&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Logga mätvärden</span>
</span></span><span class=line><span class=cl>    <span class=n>cv_scores</span> <span class=o>=</span> <span class=n>cross_val_score</span><span class=p>(</span><span class=n>pipeline</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sentiment&#39;</span><span class=p>],</span> <span class=n>cv</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>mlflow</span><span class=o>.</span><span class=n>log_metric</span><span class=p>(</span><span class=s2>&#34;cv_mean_accuracy&#34;</span><span class=p>,</span> <span class=n>cv_scores</span><span class=o>.</span><span class=n>mean</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Registrera modell i MLflow-register</span>
</span></span><span class=line><span class=cl>    <span class=n>model_info</span> <span class=o>=</span> <span class=n>mlflow</span><span class=o>.</span><span class=n>sklearn</span><span class=o>.</span><span class=n>log_model</span><span class=p>(</span><span class=n>sk_model</span><span class=o>=</span><span class=n>pipeline</span><span class=p>,</span> <span class=n>artifact_path</span><span class=o>=</span><span class=s2>&#34;model&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>mlflow</span><span class=o>.</span><span class=n>register_model</span><span class=p>(</span><span class=n>model_uri</span><span class=o>=</span><span class=n>model_info</span><span class=o>.</span><span class=n>model_uri</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;sentiment_classifier&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Det som är viktigt: <code>mlflow.register_model()</code> placerar den tränade modellen i ett centralt register som steg nedströms i vår pipeline kan ladda in via dess namn, inte via någon filsökväg till nåt picklat object. Denna separation mellan träning och distribution betyder att data scientists kan registrera flera modellversioner, och utvecklare kan alltid ladda den senaste versionen utan att behöva röra träningskoden.</p><h3 id=modellövervakning>Modellövervakning</h3><p>Vårt övervakningssteg analyserar prediktionstrender över tid genom att nyttja MLflows experimentspårning. Istället för att kontrollera ett enda mätartal tittar den på mönster över flera DAG-körningar för att upptäcka försämring och förändringar tidigt (se <a href=https://github.com/krjoha/ai-lab-mlops/blob/main/tasks/monitor_model.py target=_blank rel="noopener noreffer"><code>tasks/monitor_model.py</code></a>
för fullständig implementation):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>monitor_model</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># Hämta senaste körningar från MLflow (senaste 30 dagarna)</span>
</span></span><span class=line><span class=cl>    <span class=n>runs</span> <span class=o>=</span> <span class=n>mlflow</span><span class=o>.</span><span class=n>search_runs</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>experiment_ids</span><span class=o>=</span><span class=p>[</span><span class=n>experiment</span><span class=o>.</span><span class=n>experiment_id</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>order_by</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;start_time DESC&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>max_results</span><span class=o>=</span><span class=mi>50</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Analysera trender</span>
</span></span><span class=line><span class=cl>    <span class=n>avg_confidences</span> <span class=o>=</span> <span class=n>runs</span><span class=p>[</span><span class=s1>&#39;metrics.average_confidence&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>low_confidence_rates</span> <span class=o>=</span> <span class=n>runs</span><span class=p>[</span><span class=s1>&#39;metrics.low_confidence_percentage&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Generera varningar</span>
</span></span><span class=line><span class=cl>    <span class=n>alerts</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>avg_confidences</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>avg_confidences</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>alerts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;Model confidence is declining&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>low_confidence_rates</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>25</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>alerts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;High low-confidence rate: </span><span class=si>{</span><span class=n>low_confidence_rates</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Logga övervakningsresultat tillbaka till MLflow</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>mlflow</span><span class=o>.</span><span class=n>start_run</span><span class=p>(</span><span class=n>experiment_id</span><span class=o>=</span><span class=n>experiment</span><span class=o>.</span><span class=n>experiment_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>mlflow</span><span class=o>.</span><span class=n>log_metric</span><span class=p>(</span><span class=s2>&#34;overall_avg_confidence&#34;</span><span class=p>,</span> <span class=n>avg_confidences</span><span class=o>.</span><span class=n>mean</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>mlflow</span><span class=o>.</span><span class=n>log_metric</span><span class=p>(</span><span class=s2>&#34;alert_count&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>alerts</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>Detta skapar en återkopplingsloop: prediktioner genererar mätvärden, övervakningssteget analyserar dessa mätvärden över tid, och varningar triggas när mönster indikerar problem. Allt spåras i MLflow.</p><p>Workshopen omsatte <strong>MLOps-teori till praktik.</strong> Deltagarna byggde kompletta pipelines med MLflow-spårning, Airflow-orkestrering och automatiserad övervakning körande på sina egna laptops. Samma arkitektur som hanterade sentimentklassificering i workshopen skalar till bedrägeridetektering, rekommendationssystem eller efterfrågeprognoser i produktion.</p><p>Det som får detta tillvägagångssätt att fungera är att eliminera överlämningen. När data scientists och ingenjörer båda interagerar med ett delat modellregister försvinner problemet med att &ldquo;kasta det över staketet&rdquo;. Automatiserade pipelines <strong>fångar problem under utveckling, inte i produktion.</strong> Övervakningsteg spårar trender över körningarna istället för att vänta på att användare (kanske) rapporterar ett problem.</p><h2 id=mlops--ai-konsult-i-borås>MLOps & AI-konsult i Borås</h2><p>Detta var den tredje workshopen i AI Lab-serien på Högskolan i Borås, fokuserad på praktisk MLOps för utvecklare och ingenjörer. Jag tillhandahåller AI- och data engineering konsulting för företag i Borås och i hela Sverige. Om du behöver hjälp med att implementera MLOps-infrastruktur, bygga ML-pipelines eller flytta modeller från experiment till produktion, hör av dig.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Uppdaterad den 2025-11-30&nbsp;<a class=git-hash href=https://github.com/krjoha/pine-grove/commit/9dcb2845fe1740d1ad278c1563a4830c48cb66d1 target=_blank title="commit by Kristoffer Johansson(10258920+krjoha@users.noreply.github.com) 9dcb2845fe1740d1ad278c1563a4830c48cb66d1: MLOps workshop (#6)">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>9dcb2845</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Tillbaka</a></span>&nbsp;|&nbsp;<span><a href=/sv/>Hem</a></span></section></div><div class=post-nav><a href=/sv/setfit-nlp-workshop-tech-boras/ class=prev rel=prev title="Kraftfull NLP med SetFit och Few-Shot Learning"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Kraftfull NLP med SetFit och Few-Shot Learning</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://www.linkedin.com/in/kristoffer-johansson/ target=_blank>Kristoffer Johansson</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=/about target=_blank>PGI AB</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Tillbaka till början"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="Visa kommentarer"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Kopiera till urklipp",maxShownLines:50},comment:{},search:{highlightTag:"em",lunrIndexURL:"/sv/index.json",maxResultLength:10,noResultsFound:"Inga resultat hittades",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>